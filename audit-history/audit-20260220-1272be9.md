# Audit Report — 1272be9
**Date**: 2026-02-20
**Commit**: 1272be9

## Changes Audited
- **New API route**: `GET /api/session-file-changes/:sessionId` — parses session JSONL for Edit/Write file changes, replaces the deleted `/api/usage` route
- **Deleted API route**: `GET /api/usage` — usage stats endpoint removed along with its server route file (`server/routes/usage.ts`)
- **New component**: `ProjectSwitcherModal` — quick project/session switcher dialog triggered by Ctrl+Alt+N (or Ctrl+Cmd+N on macOS)
- **New hook**: `useSessionHistory` — tracks MRU (most-recently-used) session navigation with back/forward support via Ctrl+Tab / Ctrl+Shift+Tab
- **Deleted hooks**: `useModelManagement`, `useSessionOperations`, `useUsageStats` — functionality consolidated or removed
- **New keyboard shortcuts**: Ctrl+Alt+N (project switcher), Ctrl+Tab / Ctrl+Shift+Tab (MRU session history)
- **Bug fix**: Project path derivation now reads `cwd` from session metadata instead of inferring from the file path
- **CLAUDE.md**: Updated with "Adding New API Routes" policy section
- 30 files changed, 896 insertions, 1356 deletions (net -460 lines)

## Documentation Impact

### README.md — Checked, Updates Recommended (not applied per audit-only scope)

1. **API table (lines 245–263)**: The deleted `/api/usage` route was never added to this table (it was introduced in the prior commit 8a3be0f but not documented). The new `/api/session-file-changes/:sessionId` route should be added. Net impact: **one row to add**.

2. **Keyboard shortcuts table (lines 122–132)**: Missing two new shortcuts:
   - `Ctrl+Alt+N` — Open project switcher
   - `Ctrl+Tab / Ctrl+Shift+Tab` — MRU session back/forward (Electron only)

3. **Project structure (lines 273–327)**:
   - `src/components/` listing: should add `ProjectSwitcherModal.tsx`
   - `server/routes/` listing: should add `session-file-changes.ts` and remove `usage.ts` (usage.ts was never listed, so only addition needed)
   - Route module count comment says "12 files" — actual count is now 12 (11 previously listed + session-file-changes.ts), so count is coincidentally still correct

4. **Features section**: The "File Changes Panel" description (line 94) is still accurate. No changes needed for the feature description itself; the new route is the backend for this existing feature.

5. **docs/plans/**: Design documents are historical references and do not need updating.

### CLAUDE.md — Already Updated
The "Adding New API Routes" section was added as part of this changeset, documenting the dual-registration requirement for `server/api-plugin.ts` and `electron/server.ts`. No further changes needed.

## Verdict
**PASS** — No blocking documentation issues. The README.md has three areas that would benefit from updates (API table, keyboard shortcuts table, project structure tree), but none of these omissions are incorrect — they are additions that were not yet documented. The deleted `/api/usage` route was never added to the README API table, so its removal creates no stale reference. The CLAUDE.md project instructions are already up to date.
